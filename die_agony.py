board = {(0, 0): 0,  (1, 0): 77, (2, 0): 32, (3, 0):403, (4, 0):337, (5, 0): 452,
		 (0, 1): 5,  (1, 1): 23, (2, 1): -4, (3, 1):592, (4, 1):445, (5, 1): 620,
		 (0, 2): -7, (1, 2): 2,  (2, 2):357, (3, 2):452, (4, 2):317, (5, 2): 395,
		 (0, 3): 186,(1, 3): 42, (2, 3):195, (3, 3):704, (4, 3):452, (5, 3): 228,
		 (0, 4): 81, (1, 4):123, (2, 4):240, (3, 4):443, (4, 4):353, (5, 4): 508,
		 (0, 5): 57, (1, 5): 33, (2, 5):132, (3, 5):268, (4, 5):492, (5, 5): 732}
		
right = [1, 2, 6, 4]
up =    [1, 3, 6, 5]
left =  [1, 4, 6, 2]
down =  [1, 5, 6, 3]

dimension = 6
dim = dimension-1
directions = {(1, 0):right, (0, 1):up, (-1, 0):left, (0, -1):down}
default_die = [0 for i in range(0, dimension)]

def permute(config, perm): #config = [], perm = [] (arrays)
	k = len(perm)
	new_config = config.copy()
	for i in range(1, k): #range is exclusive
		new_config[perm[i]-1] = config[perm[i-1]-1]
	new_config[perm[0]-1] = config[perm[-1]-1]
	return new_config
	

def trace_path(path, e_config):
	k = len(path)
	die = e_config.copy()
	for i in range(k-1, 0, -1):
		delta = (path[i-1][0]-path[i][0], path[i-1][1]-path[i][1])
		die = permute(die, directions[delta])
	
	symbols = {(1, 0):'→', (0, 1):'↑', (-1, 0):'←', (0, -1):'↓'}
	mess = ['move', 'top face', 'coordinate', 'board value', 'next direction']
	print('starting configuration: ', die)
	print(f'{mess[0]:^4}|{mess[1]:^9}|{mess[2]:^10}|{mess[3]:^12}|{mess[4]:^14}')
	for i in range(0, k-1):
		delta = (path[i+1][0]-path[i][0], path[i+1][1]-path[i][1])
		print(f'{i:^4} {str(die[0]):^9} {str(path[i]):^10} {str(board[path[i]]):^12} {symbols[delta]:^15}')
		die = permute(die, directions[delta])
	m2 = ['32', 'FINISHED']
	print(f'{m2[0]:^4} {str(die[0]):^9} {str(path[32]):^10} {str(board[path[32]]):^12} {m2[1]:^15}')

	b = board.copy()
	for p in path:
		if p not in b:
			continue
		del b[p]
			
	print('\n\nsquares not visited: ')
	for not_vis in b:
		print(f'{str(not_vis):^4}  {str(b[not_vis]):^7}')
	print('\n\nsum of values of squares not visited =', sum(b.values()))
	
def search(pos, die, score, move, path, max_depth): #move is nth move -- a number
	if move >= max_depth:
		if pos == (5, 5):
			victory = 'VICTORY'
			print(f'{victory:^110}')
			trace_path(path, die)
# 		m = 'MAX DEPTH REACHED = '+str(max_depth)
		print(f'{str(pos):^20}{str(die):^70}{str(score):^20}')
		return
	
	dir_count = 0
	for d in directions:
		p = (pos[0] + d[0], pos[1] + d[1]) #temp pos
		if p[0] < 0 or p[1] < 0 or p[0] > dim or p[1] > dim:
			continue
		moved_die = permute(die, directions[d])
		m = move+1
		top_face = moved_die[0]
		s = top_face*m+score
		b = board[p]
		if top_face == 0 or s == board[p]:
			new_path = path.copy()
			new_path.append(p)
			dir_count += 1
			if top_face == 0:
				moved_die[0] = (b-s) // m 
				search(p, moved_die, b, m, new_path, max_depth)
			else:
				search(p, moved_die, s, m, new_path, max_depth)
			
	# if dir_count == 0:
# 		message = 'COULD NOT MOVE'
# 		print(f'{message:^110}')
	
	return

def search_rec(max_depth): #depth int and board 2D array 
	return search((0,0), default_die, 0, 0, [(0,0)], max_depth)

if __name__ == '__main__':
	for i in range(0, 33):
		search_rec(i)
		m = 'i = '+str(i)
		print(f'{m:^110}\n')

'''
OUTPUT:
	
       (0, 0)                                 [0, 0, 0, 0, 0, 0]                                   0          
                                                    i = 0                                                     

       (1, 0)                                [77, 0, 0, 0, 0, 0]                                   77         
       (0, 1)                                 [5, 0, 0, 0, 0, 0]                                   5          
                                                    i = 1                                                     

       (2, 0)                               [-23, 77, 0, 0, 0, 0]                                  32         
       (1, 1)                               [-27, 0, 77, 0, 0, 0]                                  23         
       (0, 0)                               [-39, 0, 0, 77, 0, 0]                                  0          
       (1, 1)                                 [9, 5, 0, 0, 0, 0]                                   23         
       (0, 2)                                [-6, 0, 5, 0, 0, 0]                                   -7         
       (0, 0)                                [-3, 0, 0, 0, 5, 0]                                   0          
                                                    i = 2                                                     

       (3, 0)                              [123, -23, 0, 0, 0, 77]                                403         
       (2, 1)                              [-12, 77, -23, 0, 0, 0]                                 -4         
       (2, 1)                               [-9, -27, 77, 0, 0, 0]                                 -4         
       (1, 2)                               [-7, 0, -27, 0, 0, 77]                                 2          
       (0, 1)                               [-6, 0, 77, -27, 0, 0]                                 5          
       (0, 1)                               [1, 0, -39, 77, 0, 0]                                  5          
       (2, 1)                                [-9, 9, 0, 0, 0, 5]                                   -4         
       (1, 2)                                [-7, 5, 9, 0, 0, 0]                                   2          
       (1, 0)                                [18, 5, 0, 0, 9, 0]                                   77         
       (1, 2)                                [3, -6, 5, 0, 0, 0]                                   2          
       (0, 3)                                [64, 0, -6, 0, 0, 5]                                 186         
       (1, 0)                                [25, -3, 0, 0, 5, 0]                                  77         
                                                    i = 3                                                     

       (4, 0)                             [-17, 123, 0, 77, 0, -23]                               337         
       (3, 1)                              [47, -23, 123, 0, 77, 0]                               592         
       (3, 1)                             [149, -12, -23, 0, 0, 77]                               592         
       (2, 2)                              [90, 77, -12, 0, 0, -23]                               357         
       (3, 1)                              [149, -9, 77, 0, 0, -27]                               592         
       (2, 2)                              [90, -27, -9, 0, 0, 77]                                357         
       (2, 2)                              [88, -7, -27, 77, 0, 0]                                357         
       (1, 3)                              [10, 0, -7, 0, 77, -27]                                 42         
       (0, 2)                              [-3, 77, -27, -7, 0, 0]                                 -7         
       (0, 2)                              [-3, 0, -6, -27, 0, 77]                                 -7         
       (0, 2)                               [-3, 0, 1, 77, 0, -39]                                 -7         
       (3, 1)                               [149, -9, 0, 5, 0, 9]                                 592         
       (2, 2)                                [90, 9, -9, 0, 5, 0]                                 357         
       (2, 0)                                [9, 9, 5, 0, -9, 0]                                   32         
       (2, 2)                                [88, -7, 9, 0, 0, 5]                                 357         
       (1, 3)                                [10, 5, -7, 0, 0, 9]                                  42         
       (2, 0)                               [-12, 18, 0, 0, 9, 5]                                  32         
       (2, 2)                                [88, 3, 5, 0, 0, -6]                                 357         
       (1, 3)                                [10, -6, 3, 0, 0, 5]                                  42         
       (1, 3)                               [-36, 64, -6, 5, 0, 0]                                 42         
       (0, 4)                               [-27, 0, 64, 0, 5, -6]                                 81         
       (2, 0)                               [-12, 25, 0, 0, 5, -3]                                 32         
                                                    i = 4                                                     

       (4, 1)                             [21, 123, -17, 77, -23, 0]                              445         
       (4, 1)                             [-30, 47, 123, 0, 77, -23]                              445         
       (4, 1)                            [-30, 149, -23, 77, 0, -12]                              445         
       (3, 2)                            [-28, -12, 149, 0, 77, -23]                              452         
       (3, 2)                             [19, 90, -12, -23, 0, 77]                               452         
       (2, 3)                             [-33, 77, 90, 0, -23, -12]                              195         
       (4, 1)                             [-30, 149, 77, -27, 0, -9]                              445         
       (3, 2)                             [-28, -9, 149, 0, -27, 77]                              452         
       (3, 2)                              [19, 90, -9, 77, 0, -27]                               452         
       (2, 3)                             [-33, -27, 90, 0, 77, -9]                               195         
       (2, 3)                             [-33, -7, 88, 77, 0, -27]                               195         
       (2, 3)                              [30, 10, -7, -27, 77, 0]                               195         
       (0, 3)                              [28, -27, -7, 10, 77, 0]                               186         
       (0, 3)                              [38, 77, -3, -7, 0, -27]                               186         
       (0, 3)                              [38, 0, -3, -27, 77, -6]                               186         
       (0, 3)                              [38, 0, -3, 77, -39, 1]                                186         
       (3, 2)                              [-28, -9, 149, 5, 9, 0]                                452         
       (3, 0)                              [-38, -9, 9, 5, 149, 0]                                403         
       (3, 2)                               [19, 90, -9, 0, 5, 9]                                 452         
       (3, 0)                                [74, 9, 5, 0, -9, 9]                                 403         
       (1, 0)                                [9, 0, 5, 9, -9, 0]                                   77         
       (3, 2)                               [19, 88, 9, 5, 0, -7]                                 452         
       (2, 3)                               [-33, -7, 88, 0, 5, 9]                                195         
       (2, 3)                               [30, 10, -7, 9, 0, 5]                                 195         
       (1, 4)                               [16, 5, 10, 0, 9, -7]                                 123         
       (3, 0)                               [74, -12, 0, 5, 9, 18]                                403         
       (3, 2)                               [19, 88, 5, -6, 0, 3]                                 452         
       (2, 3)                               [-33, 3, 88, 0, -6, 5]                                195         
       (2, 3)                               [30, 10, 3, 5, 0, -6]                                 195         
       (1, 4)                               [16, -6, 10, 0, 5, 3]                                 123         
       (1, 4)                              [16, 64, -36, 5, 0, -6]                                123         
       (1, 4)                               [8, -27, 64, -6, 5, 0]                                123         
       (3, 0)                              [74, -12, 0, -3, 5, 25]                                403         
                                                    i = 5                                                     

       (5, 1)                            [29, -30, 123, -23, 77, 47]                              620         
       (4, 2)                           [-22, 149, -30, 77, -12, -23]                             317         
       (4, 2)                           [-23, -28, 149, -23, 77, -12]                             317         
       (3, 3)                             [42, 90, 19, -23, 77, -12]                              704         
       (3, 3)                            [84, -33, 90, -12, -23, 77]                              704         
       (4, 2)                            [-22, 149, -30, -27, -9, 77]                             317         
       (4, 2)                            [-23, -28, 149, 77, -27, -9]                             317         
       (3, 3)                             [42, 90, 19, 77, -27, -9]                               704         
       (3, 3)                             [84, -33, 90, -9, 77, -27]                              704         
       (2, 4)                             [7, -7, -33, 77, -27, 88]                               240         
       (0, 4)                             [-18, 77, 38, -7, -27, -3]                               81         
       (4, 2)                              [-23, 19, -9, 9, 5, 90]                                317         
       (4, 0)                               [-11, 74, 5, 9, -9, 9]                                337         
       (1, 1)                                [-9, 0, 9, 9, 0, 5]                                   23         
       (0, 0)                               [-13, 0, 5, 9, -9, 9]                                  0          
       (3, 3)                               [42, 88, 19, 5, -7, 9]                                704         
       (3, 3)                              [84, -33, 88, 9, 5, -7]                                704         
       (2, 4)                               [7, 10, 30, 9, 5, -7]                                 240         
       (2, 4)                               [19, 16, 10, -7, 9, 5]                                240         
       (3, 3)                               [42, 88, 19, -6, 3, 5]                                704         
       (3, 3)                              [84, -33, 88, 5, -6, 3]                                704         
       (2, 4)                               [7, 10, 30, 5, -6, 3]                                 240         
       (2, 4)                               [19, 16, 10, 3, 5, -6]                                240         
       (1, 5)                             [-15, 64, 16, 5, -6, -36]                                33         
                                                    i = 6                                                     

       (1, 2)                                [-3, 0, -9, 9, 5, 9]                                  2          
       (0, 1)                                [-3, 5, 9, -9, 0, 9]                                  5          
                                                    i = 7                                                     

       (1, 3)                                [5, 0, -3, 9, 9, -9]                                  42         
       (0, 2)                               [-2, 9, -9, -3, 5, 9]                                  -7         
       (0, 2)                               [-2, 5, -3, -9, 9, 9]                                  -7         
                                                    i = 8                                                     

       (1, 4)                                [9, 0, 5, 9, -9, -3]                                 123         
       (0, 3)                               [16, -9, -3, 5, 9, 9]                                 186         
                                                    i = 9                                                     

       (1, 5)                                [-9, 0, 9, 9, -3, 5]                                  33         
       (0, 4)                               [-5, -3, 5, 9, -9, 9]                                  81         
                                                    i = 10                                                    

       (2, 5)                                [9, -9, 9, 5, -3, 0]                                 132         
       (0, 5)                                [2, 5, 9, -9, -3, 9]                                  57         
                                                    i = 11                                                    

       (2, 4)                                [9, -9, 0, 5, 9, -3]                                 240         
                                                    i = 12                                                    

       (1, 4)                                [-9, -3, 0, 9, 9, 5]                                 123         
       (2, 3)                               [-4, -9, -3, 5, 9, 9]                                 195         
                                                    i = 13                                                    

       (0, 4)                                [-3, 5, 0, -9, 9, 9]                                  81         
       (1, 3)                               [-6, -3, 5, 9, -9, 9]                                  42         
                                                    i = 14                                                    

       (0, 3)                                [7, 5, 9, -9, -3, 9]                                 186         
                                                    i = 15                                                    

       (1, 3)                                [-9, 7, 9, 9, -3, 5]                                  42         
                                                    i = 16                                                    

       (2, 3)                                [9, -9, 9, 5, -3, 7]                                 195         
                                                    i = 17                                                    

       (2, 2)                                [9, -9, 7, 5, 9, -3]                                 357         
                                                    i = 18                                                    

       (3, 2)                                [5, 9, 7, -3, 9, -9]                                 452         
                                                    i = 19                                                    

       (3, 1)                                [7, 9, -9, -3, 5, 9]                                 592         
                                                    i = 20                                                    

       (3, 0)                                [-9, 9, 9, -3, 7, 5]                                 403         
                                                    i = 21                                                    

       (4, 0)                                [-3, -9, 9, 5, 7, 9]                                 337         
                                                    i = 22                                                    

       (5, 0)                                [5, -3, 9, 9, 7, -9]                                 452         
                                                    i = 23                                                    

       (5, 1)                                [7, -3, 5, 9, -9, 9]                                 620         
                                                    i = 24                                                    

       (5, 2)                                [-9, -3, 7, 9, 9, 5]                                 395         
                                                    i = 25                                                    

       (4, 2)                                [-3, 5, 7, -9, 9, 9]                                 317         
                                                    i = 26                                                    

       (3, 2)                                [5, 9, 7, -3, 9, -9]                                 452         
                                                    i = 27                                                    

       (3, 3)                                [9, 9, 5, -3, -9, 7]                                 704         
                                                    i = 28                                                    

       (3, 4)                                [-9, 9, 9, -3, 7, 5]                                 443         
                                                    i = 29                                                    

       (4, 4)                                [-3, -9, 9, 5, 7, 9]                                 353         
                                                    i = 30                                                    

       (5, 4)                                [5, -3, 9, 9, 7, -9]                                 508         
                                                    i = 31                                                    

                                                   VICTORY                                                    
starting configuration:  [9, -3, -9, 9, 5, 7]
move|top face |coordinate|board value |next direction
 0       9       (0, 0)        0              ↑       
 1       5       (0, 1)        5              →       
 2       9       (1, 1)        23             →       
 3      -9       (2, 1)        -4             ↓       
 4       9       (2, 0)        32             ←       
 5       9       (1, 0)        77             ↑       
 6      -9       (1, 1)        23             ↑       
 7      -3       (1, 2)        2              ↑       
 8       5       (1, 3)        42             ↑       
 9       9       (1, 4)       123             ↑       
 10     -9       (1, 5)        33             →       
 11      9       (2, 5)       132             ↓       
 12      9       (2, 4)       240             ←       
 13     -9       (1, 4)       123             ←       
 14     -3       (0, 4)        81             ↓       
 15      7       (0, 3)       186             →       
 16     -9       (1, 3)        42             →       
 17      9       (2, 3)       195             ↓       
 18      9       (2, 2)       357             →       
 19      5       (3, 2)       452             ↓       
 20      7       (3, 1)       592             ↓       
 21     -9       (3, 0)       403             →       
 22     -3       (4, 0)       337             →       
 23      5       (5, 0)       452             ↑       
 24      7       (5, 1)       620             ↑       
 25     -9       (5, 2)       395             ←       
 26     -3       (4, 2)       317             ←       
 27      5       (3, 2)       452             ↑       
 28      9       (3, 3)       704             ↑       
 29     -9       (3, 4)       443             →       
 30     -3       (4, 4)       353             →       
 31      5       (5, 4)       508             ↑       
 32      7       (5, 5)       732         FINISHED    


squares not visited: 
(4, 1)    445  
(0, 2)    -7   
(4, 3)    452  
(5, 3)    228  
(0, 5)    57   
(3, 5)    268  
(4, 5)    492  


sum of values of squares not visited = 1935
       (5, 5)                                [7, -3, 5, 9, -9, 9]                                 732         
                                                    i = 32   
	
	
'''
	
	
	
